<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TrueText AI</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100vh;
            margin: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .card {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.15);
            width: 100%;
            max-width: 440px;
            text-align: center;
        }
        .robot-icon { font-size: 3.5rem; color: #6a11cb; margin-bottom: 10px; }
        h1 { color: #111827; font-size: 1.8rem; margin: 0; }
        .subtitle { color: #6B7280; font-size: 0.9rem; margin-top: 5px; margin-bottom: 25px; }
        
        /* Form & Tabs */
        .form-group { text-align: left; margin-bottom: 20px; }
        label { display: block; font-size: 0.85rem; font-weight: 600; color: #374151; margin-bottom: 8px; }
        
        select, textarea, input[type="file"] {
            width: 100%; padding: 12px; border: 1px solid #E5E7EB;
            border-radius: 10px; background-color: #F9FAFB;
            font-size: 0.95rem; font-family: inherit; box-sizing: border-box;
        }
        textarea { height: 120px; resize: none; }

        /* Tabs Logic */
        .tabs { display: flex; margin-bottom: 15px; background: #F3F4F6; padding: 4px; border-radius: 10px; }
        .tab { flex: 1; padding: 8px; border: none; background: transparent; cursor: pointer; font-weight: 600; color: #6B7280; border-radius: 8px; }
        .tab.active { background: white; color: #6a11cb; shadow: 0 2px 4px rgba(0,0,0,0.05); }

        /* Button & Result */
        button.analyze-btn {
            width: 100%; padding: 14px;
            background: linear-gradient(90deg, #6a11cb 0%, #2575fc 100%);
            color: white; border: none; border-radius: 10px;
            font-size: 1rem; font-weight: 600; cursor: pointer;
            margin-top: 10px;
        }
        #result { margin-top: 20px; padding: 15px; border-radius: 10px; font-weight: 600; display: none; }
        .safe { background: #ECFDF5; color: #047857; border: 1px solid #A7F3D0; }
        .danger { background: #FEF2F2; color: #DC2626; border: 1px solid #FECACA; }
        .hidden { display: none; }
    </style>
</head>
<body>

    <div class="card">
        <i class="fas fa-robot robot-icon"></i>
        <h1>TrueText AI</h1>
        <p class="subtitle">Advanced Spam & Fraud Detection System</p>

        <div class="form-group">
            <label>Select Detection Type</label>
            <select id="modelType">
                <option value="sms">ðŸ“± SMS Spam Detector</option>
                <option value="email">ðŸ“§ Email Spam Detector</option>
                <option value="news">ðŸ“° Fake News Detector</option>
            </select>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="switchTab('text')" id="tab-text">Paste Text</button>
            <button class="tab" onclick="switchTab('file')" id="tab-file">Upload File</button>
        </div>

        <div id="input-text-group" class="form-group">
            <textarea id="textInput" placeholder="Paste your message here..."></textarea>
        </div>

        <div id="input-file-group" class="form-group hidden">
            <input type="file" id="fileInput" accept=".txt,.pdf,.docx">
            <p style="font-size: 0.8rem; color: #666; margin-top: 5px;">Supports: .txt, .pdf, .docx</p>
        </div>

        <button class="analyze-btn" onclick="analyze()">Analyze Content</button>

        <div id="result"></div>
    </div>

    <script>
        let currentMode = 'text';

        function switchTab(mode) {
            currentMode = mode;
            // Update UI
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.getElementById('tab-' + mode).classList.add('active');
            
            if(mode === 'text') {
                document.getElementById('input-text-group').classList.remove('hidden');
                document.getElementById('input-file-group').classList.add('hidden');
            } else {
                document.getElementById('input-text-group').classList.add('hidden');
                document.getElementById('input-file-group').classList.remove('hidden');
            }
        }

        async function analyze() {
            const type = document.getElementById('modelType').value;
            const resBox = document.getElementById('result');
            const btn = document.querySelector('.analyze-btn');
            
            const formData = new FormData();
            formData.append('type', type);

            if (currentMode === 'text') {
                const text = document.getElementById('textInput').value;
                if (!text) { alert("Please enter text!"); return; }
                formData.append('text', text);
            } else {
                const fileBox = document.getElementById('fileInput');
                if (fileBox.files.length === 0) { alert("Please select a file!"); return; }
                formData.append('file', fileBox.files[0]);
            }

            btn.innerText = "Processing...";
            resBox.style.display = 'none';

            try {
                const response = await fetch('/predict', { method: 'POST', body: formData });
                const data = await response.json();

                resBox.style.display = 'block';
                resBox.innerText = data.prediction;
                
                if (data.prediction.includes("Spam") || data.prediction.includes("Fake")) {
                    resBox.className = 'danger';
                } else {
                    resBox.className = 'safe';
                }
            } catch (e) {
                alert("Connection Error.");
            }
            btn.innerText = "Analyze Content";
        }
    </script>
</body>
</html>